<!DOCTYPE html>
<html lang="en">
<body>
<style>
.last
{
background: #900;
}
</style>
<ul id="list">
<li></li>
<li>
<ul>
<li></li>
<li></li>
<li></li>
</ul>
</li>
<li></li>
<li></li>
</ul>
<script
src="jquery-1.11.2.js"></script>
<script> (function ($) {
$('#list') .find('> li').filter(':last').addClass('last').end().filter(':last')
           .find('ul').css('background', '#ccc').find('li:last')
           .addClass('last').end().end().end().find('li').append('I am an &lt;li&gt;');
})(jQuery); </script>
</body>
</html>